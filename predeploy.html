<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OFEM Pre‑Deploy Guide</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.5; }
    ol { max-width: 700px; }
    button { padding: 10px 16px; font-size: 16px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Getting Started with OFEM</h1>
  <p>Follow these simple steps on a Mac to run OFEM. No programming knowledge required.</p>
  <ol>
    <li><strong>Download and Unzip</strong>
      <ol>
        <li>Download the project ZIP file.</li>
        <li>Open your Downloads folder and double‑click the ZIP to create the <code>OFEM</code> folder.</li>
      </ol>
    </li>
    <li><strong>Allow Scripts to Run</strong>
      <ol>
        <li>Click the button below to remove the quarantine flag from all <code>.command</code> files (install, setup-env, setup-db, start, etc.).</li>
        <li style="margin-top:8px;"><button onclick="window.location.href='remove-quarantine.command'">Allow command files</button></li>
        <li style="font-size:0.9em;color:#555;margin-top:4px;">If the browser shows the script code instead of running it, open the <code>OFEM</code> folder in Finder and double-click <code>remove-quarantine.command</code> manually.</li>
      </ol>
    </li>
    <li><strong>Install Requirements</strong>
      <ol>
        <li>Click the button below to install Node.js (LTS) in this folder and download all required npm packages.</li>
        <li style="margin-top:8px;"><button onclick="window.location.href='install-node.command'">Install Node at Folder</button></li>
        <li style="font-size:0.9em;color:#555;margin-top:4px;">If the browser shows the script code instead of running it, open the <code>OFEM</code> folder in Finder and double-click <code>install-node.command</code> manually.</li>
        <li style="font-size:0.9em;color:#555;margin-top:4px;">You may be asked for your macOS password to complete the installation.</li>
        <li>Click the button below to install Docker Desktop using Homebrew.</li>
        <li style="margin-top:8px;"><button onclick="window.location.href='install-docker.command'">Install Docker</button></li>
        <li style="font-size:0.9em;color:#555;margin-top:4px;">This opens Terminal in the <code>OFEM</code> folder and runs <code>brew install --cask docker</code>. If the browser shows the script code instead of running it, open the <code>OFEM</code> folder in Finder and double-click <code>install-docker.command</code> manually.</li>
        <li style="font-size:0.9em;color:#555;margin-top:4px;">If you already have a local PostgreSQL server running you can skip Docker, but the setup wizard uses Docker by default.</li>
        <li>Once Node and Docker are installed, run the project installer below to download any remaining packages and run initial database setup.</li>
        <li style="margin-top:8px;"><button onclick="window.location.href='install.command'">Run installer</button></li>
        <li style="font-size:0.9em;color:#555;margin-top:4px;">If the browser shows the script code instead of running it, open the <code>OFEM</code> folder in Finder and double-click <code>install.command</code> manually.</li>
      </ol>
    </li>
    <li><strong>Configure API Keys and Database (optional)</strong>
      <ol>
        <li>Click the button below to enter your OnlyFans and OpenAI API keys. The script also accepts credentials for an existing PostgreSQL database; leave these fields blank to create a new database later.</li>
        <li style="margin-top:8px;"><button onclick="window.location.href='setup-env.command'">Configure API keys and DB</button></li>
        <li style="font-size:0.9em;color:#555;margin-top:4px;">If the browser shows the script code instead of running it, open the <code>OFEM</code> folder in Finder and double-click <code>setup-env.command</code> manually.</li>
      </ol>
    </li>
    <li><strong>Create the Database</strong>
      <ol>
        <li>If you supplied database credentials above, you can skip this step. Otherwise, click the button below to create a new database. A wizard opens in Terminal, creates a database with a random name, user, and password, then updates your <code>.env</code> file automatically.</li>
        <li style="margin-top:8px;"><button onclick="window.location.href='setup-db.command'">Set up new database</button></li>
        <li style="font-size:0.9em;color:#555;margin-top:4px;">If the browser shows the script code instead of running it, open the <code>OFEM</code> folder in Finder and double‑click <code>setup-db.command</code> manually.</li>
        <li style="font-size:0.9em;color:#555;margin-top:4px;">Leave the Terminal window open until it shows “Database setup complete!”. If it reports an error, install Docker Desktop or start PostgreSQL manually and then retry. To capture detailed logs, run <code>bash setup-db.command 2>&1 | tee setup-db.log</code> and send the resulting <code>setup-db.log</code> file for support.</li>
      </ol>
    </li>
    <li><strong>Add to the Database</strong>
      <ol>
        <li>Run any new database migrations to update the schema without losing existing data.</li>
        <li style="margin-top:8px;"><button onclick="window.location.href='addtodatabase.command'">Run migrations</button></li>
        <li style="font-size:0.9em;color:#555;margin-top:4px;">If the browser shows the script code instead of running it, open the <code>OFEM</code> folder in Finder and double-click <code>addtodatabase.command</code> manually.</li>
      </ol>
    </li>
    <li><strong>Run the App</strong>
      <ol>
        <li>Double‑click <code>start.command</code> to launch the server.</li>
      </ol>
    </li>
    <li><strong>Open the Dashboard</strong>
      <ol>
        <li>When Terminal shows “OFEM server listening on http://localhost:3000”, open a web browser.</li>
        <li>Visit <a href="http://localhost:3000">http://localhost:3000</a>.</li>
      </ol>
    </li>
  </ol>
  <p>The app is now ready. Use the dashboard buttons to update fan names and send messages.</p>
</body>
</html>
